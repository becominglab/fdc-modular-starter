# SLA・可用性定義書

**Version:** 1.0
**制定日:** 2025-12-02
**適用範囲:** Founders Direct Cockpit 全サービス

---

## 1. サービスレベル目標（SLO）

### 1.1 可用性目標

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| 月間稼働率 | **99.5%** | (総時間 - 計画外停止時間) / 総時間 |
| 計画外ダウンタイム上限 | 3.6時間/月 | 月間の累計停止時間 |
| 計画メンテナンス通知 | 72時間前 | メール通知 |

### 1.2 稼働率の定義

**稼働状態とみなす条件:**
- ユーザーがログインできる
- Dashboard が表示される
- データの読み書きが可能
- Workspace 切替が機能する

**停止状態とみなす条件:**
- API レスポンスが 5xx エラーを返す（5分間継続）
- ログイン機能が利用不可
- データベース接続が不可能

### 1.3 除外事項

以下は SLA 計算から除外します：

1. **計画メンテナンス** - 72時間前に通知済みのもの
2. **不可抗力** - 天災、インターネット障害、クラウドプロバイダー障害
3. **ユーザー起因** - 誤操作、不正アクセス試行
4. **サードパーティ障害** - Google OAuth、OpenAI API の障害

---

## 2. 復旧目標（RTO/RPO）

### 2.1 RTO（Recovery Time Objective）- 目標復旧時間

| 障害レベル | 定義 | RTO |
|-----------|------|-----|
| **Critical** | 全サービス停止、データ損失リスク | **1時間** |
| **High** | 主要機能の停止（ログイン不可など） | **4時間** |
| **Medium** | 一部機能の停止（レポート生成など） | **8時間** |
| **Low** | 軽微な不具合、表示崩れ | **24時間** |

### 2.2 RPO（Recovery Point Objective）- 目標復旧時点

| データ種別 | RPO | バックアップ頻度 |
|-----------|-----|----------------|
| ユーザーデータ | **24時間** | 日次自動バックアップ |
| ワークスペースデータ | **24時間** | 日次自動バックアップ |
| 監査ログ | **24時間** | 日次自動バックアップ |
| セッションデータ | N/A | 復旧不要（再ログインで対応） |

### 2.3 復旧優先順位

```
1. 認証システム（ログイン機能）
2. データベース接続
3. Dashboard 表示
4. データ読み取り機能
5. データ書き込み機能
6. レポート・エクスポート機能
7. AI 機能
```

---

## 3. サービスレベル合意（SLA）

### 3.1 プラン別 SLA

| プラン | 月間稼働率 | RTO (Critical) | サポート時間 |
|--------|----------|----------------|--------------|
| **Trial** | 99.0% | 4時間 | 平日 10:00-18:00 |
| **Standard** | 99.5% | 2時間 | 平日 9:00-21:00 |
| **Enterprise** | 99.9% | 1時間 | 24/7 |

### 3.2 SLA 違反時の対応

| 稼働率 | 対応 |
|--------|------|
| 99.5% 以上 | 通常運用 |
| 99.0% - 99.5% | 原因分析レポート提出 |
| 95.0% - 99.0% | 利用料の 10% クレジット |
| 95.0% 未満 | 利用料の 25% クレジット |

---

## 4. 監視項目

### 4.1 ヘルスチェック

| エンドポイント | 間隔 | タイムアウト | アラート条件 |
|---------------|------|------------|-------------|
| `/api/health` | 1分 | 10秒 | 3回連続失敗 |
| Dashboard 表示 | 5分 | 30秒 | 2回連続失敗 |
| DB 接続 | 1分 | 5秒 | 1回失敗 |

### 4.2 監視メトリクス

| メトリクス | 閾値 (Warning) | 閾値 (Critical) |
|-----------|---------------|----------------|
| エラー率 (5xx) | 1% | 5% |
| API レスポンス P95 | 500ms | 1000ms |
| CPU 使用率 | 70% | 90% |
| メモリ使用率 | 80% | 95% |

### 4.3 アラート通知

| レベル | 通知方法 | 通知先 |
|--------|---------|--------|
| Critical | 電話 + Slack + メール | オンコール担当 + 管理者 |
| High | Slack + メール | 開発チーム |
| Medium | Slack | 開発チーム |
| Low | メール（日次サマリ） | 開発チーム |

---

## 5. 計画メンテナンス

### 5.1 メンテナンスウィンドウ

| 種別 | 時間帯 | 頻度 | 通知 |
|------|--------|------|------|
| 定期メンテナンス | 火曜 02:00-05:00 JST | 月1回 | 7日前 |
| 緊急メンテナンス | 随時 | 必要時 | 可能な限り早く |
| セキュリティパッチ | 随時 | 必要時 | 24時間前 |

### 5.2 メンテナンス通知テンプレート

```
【Founders Direct メンテナンスのお知らせ】

実施日時: YYYY年MM月DD日 HH:MM - HH:MM (JST)
影響範囲: [全サービス / 一部機能（具体的に記載）]
作業内容: [概要を記載]

ご不便をおかけしますが、ご理解のほどよろしくお願いいたします。
```

---

## 6. エスカレーションマトリクス

### 6.1 障害発生時の連絡体制

```
障害検知
    ↓
オンコール担当（一次対応）- 15分以内
    ↓ 解決不可の場合
開発リーダー（二次対応）- 30分以内
    ↓ 解決不可の場合
CTO / 経営層（三次対応）- 1時間以内
```

### 6.2 連絡先

| 役割 | 連絡先 | 対応時間 |
|------|--------|----------|
| セキュリティチーム | security@example.com | 24/7 |
| 技術サポート | support@example.com | 平日 9:00-18:00 |
| 緊急連絡先 | +81-XX-XXXX-XXXX | 24/7（Critical のみ） |

---

## 7. 定期レビュー

### 7.1 レビュースケジュール

| レビュー種別 | 頻度 | 参加者 |
|-------------|------|--------|
| 週次稼働率レビュー | 毎週月曜 | 開発チーム |
| 月次 SLA レポート | 毎月 1 日 | 開発チーム + 管理者 |
| 四半期 SLA 見直し | 四半期末 | 経営層 + 開発チーム |

### 7.2 月次レポート項目

- 月間稼働率
- インシデント数・内訳
- 平均復旧時間
- SLA 達成状況
- 改善アクション

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| v1.0 | 2025-12-02 | 初版制定 |

---

**次回レビュー予定:** 2026-03-02
