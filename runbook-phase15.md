# Phase 15: 10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥

## ç›®æ¨™

ãƒ“ã‚¸ãƒã‚¹ãƒ„ãƒ¼ãƒ«ã®ç¬¬ä¸€å¼¾ã¨ã—ã¦ã€10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ã‚’å®Ÿè£…ï¼š
- ãƒ–ãƒ©ãƒ³ãƒ‰ã®åŸºæœ¬æƒ…å ±ï¼ˆåå‰ã€ã‚¿ã‚°ãƒ©ã‚¤ãƒ³ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼‰
- 10ãƒã‚¤ãƒ³ãƒˆè¦ç´ ã®ç·¨é›†
- ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³è¡¨ç¤º
- ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ãƒã‚§ãƒƒã‚¯

---

## 10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ã¨ã¯

```
ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’10ã®è¦³ç‚¹ã‹ã‚‰æ•´ç†ã—ã€ä¸€è²«æ€§ã®ã‚ã‚‹ãƒ–ãƒ©ãƒ³ãƒ‰ä½“é¨“ã‚’è¨­è¨ˆã—ã¾ã™ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Missionï¼ˆãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼‰     - å­˜åœ¨æ„ç¾©ãƒ»ä½¿å‘½              â”‚
â”‚  2. Visionï¼ˆãƒ“ã‚¸ãƒ§ãƒ³ï¼‰        - ç›®æŒ‡ã™æœªæ¥åƒ                â”‚
â”‚  3. Target Audience          - èª°ã®ãŸã‚ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‹         â”‚
â”‚  4. Unique Value             - æä¾›ã™ã‚‹ç‹¬è‡ªã®ä¾¡å€¤           â”‚
â”‚  5. Brand Personality        - ãƒ–ãƒ©ãƒ³ãƒ‰ã®äººæ ¼ãƒ»æ€§æ ¼         â”‚
â”‚  6. Tone & Voice             - ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª¿å­     â”‚
â”‚  7. Visual Identity          - è¦–è¦šçš„ãªè¡¨ç¾ãƒ«ãƒ¼ãƒ«           â”‚
â”‚  8. Key Messages             - ä¼ãˆã‚‹ã¹ãæ ¸å¿ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸     â”‚
â”‚  9. Competitors              - ç«¶åˆã¨ã®ä½ç½®ã¥ã‘             â”‚
â”‚ 10. Differentiators          - å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ãƒ•ãƒ­ãƒ¼ã€‘
ãƒ–ãƒ©ãƒ³ãƒ‰ä½œæˆ â†’ 10ãƒã‚¤ãƒ³ãƒˆå…¥åŠ› â†’ ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ç”Ÿæˆ â†’ ãƒˆãƒ³ãƒãƒŠãƒã‚§ãƒƒã‚¯
```

---

## ç¿’å¾—ã™ã‚‹æ–°ã—ã„æ¦‚å¿µ

| æ¦‚å¿µ | èª¬æ˜ |
|------|------|
| ãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ | ä¼æ¥­ãƒ»è£½å“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’è¨ˆç”»çš„ã«æ§‹ç¯‰ã™ã‚‹æˆ¦ç•¥ |
| 10ãƒã‚¤ãƒ³ãƒˆ | ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€ãƒ“ã‚¸ãƒ§ãƒ³ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã€å·®åˆ¥åŒ–ãªã©10é …ç›®ã§æ•´ç† |
| ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ | ãƒ–ãƒ©ãƒ³ãƒ‰ã®ã€Œå£°ã€ã¨ã€ŒæŒ¯ã‚‹èˆã„ã€ã®ãƒ«ãƒ¼ãƒ« |
| Glass morphism | ã™ã‚Šã‚¬ãƒ©ã‚¹åŠ¹æœã‚’ä½¿ã£ãŸãƒ¢ãƒ€ãƒ³UIãƒ‡ã‚¶ã‚¤ãƒ³ |

---

## å‰ææ¡ä»¶

- [ ] Phase 1-14 å®Œäº†
- [ ] Supabase + èªè¨¼ãŒå‹•ä½œ
- [ ] é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹

---

## Step 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆ

### 1.1 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `supabase/migrations/20260110_phase15_brand.sql`

```sql
-- Phase 15: 10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥

-- =============================================
-- brands ãƒ†ãƒ¼ãƒ–ãƒ«
-- =============================================
CREATE TABLE IF NOT EXISTS brands (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  tagline TEXT,
  story TEXT,
  logo_url TEXT,
  primary_color TEXT DEFAULT '#3B82F6',
  secondary_color TEXT DEFAULT '#10B981',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX IF NOT EXISTS idx_brands_user_id ON brands(user_id);

-- RLS æœ‰åŠ¹åŒ–
ALTER TABLE brands ENABLE ROW LEVEL SECURITY;

-- RLS ãƒãƒªã‚·ãƒ¼
DROP POLICY IF EXISTS "Users can view own brands" ON brands;
CREATE POLICY "Users can view own brands" ON brands
  FOR SELECT USING (auth.uid() = user_id);

DROP POLICY IF EXISTS "Users can insert own brands" ON brands;
CREATE POLICY "Users can insert own brands" ON brands
  FOR INSERT WITH CHECK (auth.uid() = user_id);

DROP POLICY IF EXISTS "Users can update own brands" ON brands;
CREATE POLICY "Users can update own brands" ON brands
  FOR UPDATE USING (auth.uid() = user_id);

DROP POLICY IF EXISTS "Users can delete own brands" ON brands;
CREATE POLICY "Users can delete own brands" ON brands
  FOR DELETE USING (auth.uid() = user_id);

-- =============================================
-- brand_points ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ10ãƒã‚¤ãƒ³ãƒˆï¼‰
-- =============================================
CREATE TABLE IF NOT EXISTS brand_points (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  brand_id UUID NOT NULL REFERENCES brands(id) ON DELETE CASCADE,
  point_type TEXT NOT NULL CHECK (point_type IN (
    'mission', 'vision', 'target_audience', 'unique_value',
    'brand_personality', 'tone_voice', 'visual_identity',
    'key_messages', 'competitors', 'differentiators'
  )),
  content TEXT NOT NULL DEFAULT '',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(brand_id, point_type)
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX IF NOT EXISTS idx_brand_points_brand_id ON brand_points(brand_id);

-- RLS æœ‰åŠ¹åŒ–
ALTER TABLE brand_points ENABLE ROW LEVEL SECURITY;

-- RLS ãƒãƒªã‚·ãƒ¼ï¼ˆbrands çµŒç”±ã§æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼‰
DROP POLICY IF EXISTS "Users can view own brand points" ON brand_points;
CREATE POLICY "Users can view own brand points" ON brand_points
  FOR SELECT USING (
    EXISTS (SELECT 1 FROM brands WHERE brands.id = brand_points.brand_id AND brands.user_id = auth.uid())
  );

DROP POLICY IF EXISTS "Users can insert own brand points" ON brand_points;
CREATE POLICY "Users can insert own brand points" ON brand_points
  FOR INSERT WITH CHECK (
    EXISTS (SELECT 1 FROM brands WHERE brands.id = brand_points.brand_id AND brands.user_id = auth.uid())
  );

DROP POLICY IF EXISTS "Users can update own brand points" ON brand_points;
CREATE POLICY "Users can update own brand points" ON brand_points
  FOR UPDATE USING (
    EXISTS (SELECT 1 FROM brands WHERE brands.id = brand_points.brand_id AND brands.user_id = auth.uid())
  );

DROP POLICY IF EXISTS "Users can delete own brand points" ON brand_points;
CREATE POLICY "Users can delete own brand points" ON brand_points
  FOR DELETE USING (
    EXISTS (SELECT 1 FROM brands WHERE brands.id = brand_points.brand_id AND brands.user_id = auth.uid())
  );

-- ã‚³ãƒ¡ãƒ³ãƒˆ
COMMENT ON TABLE brands IS 'ãƒ–ãƒ©ãƒ³ãƒ‰åŸºæœ¬æƒ…å ±';
COMMENT ON TABLE brand_points IS '10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥';
COMMENT ON COLUMN brand_points.point_type IS 'mission, vision, target_audience, unique_value, brand_personality, tone_voice, visual_identity, key_messages, competitors, differentiators';
```

### 1.2 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

```bash
supabase db push
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒæˆåŠŸã—ãŸ
- [ ] brands ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚ŒãŸ
- [ ] brand_points ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚ŒãŸ
- [ ] RLS ãƒãƒªã‚·ãƒ¼ãŒè¨­å®šã•ã‚ŒãŸ

---

## Step 2: å‹å®šç¾©ã®ä½œæˆ

### 2.1 ãƒ–ãƒ©ãƒ³ãƒ‰å‹å®šç¾©

**ãƒ•ã‚¡ã‚¤ãƒ«:** `lib/types/brand.ts`

```typescript
/**
 * lib/types/brand.ts
 *
 * 10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ã®å‹å®šç¾©
 */

// 10ãƒã‚¤ãƒ³ãƒˆã®ç¨®é¡
export type BrandPointType =
  | 'mission'
  | 'vision'
  | 'target_audience'
  | 'unique_value'
  | 'brand_personality'
  | 'tone_voice'
  | 'visual_identity'
  | 'key_messages'
  | 'competitors'
  | 'differentiators';

// ãƒ–ãƒ©ãƒ³ãƒ‰åŸºæœ¬æƒ…å ±
export interface Brand {
  id: string;
  user_id: string;
  name: string;
  tagline?: string | null;
  story?: string | null;
  logo_url?: string | null;
  primary_color?: string;
  secondary_color?: string;
  created_at: string;
  updated_at: string;
}

// ãƒ–ãƒ©ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ10é …ç›®ï¼‰
export interface BrandPoint {
  id: string;
  brand_id: string;
  point_type: BrandPointType;
  content: string;
  created_at: string;
  updated_at: string;
}

// ãƒ–ãƒ©ãƒ³ãƒ‰ä½œæˆç”¨
export interface BrandCreate {
  name: string;
  tagline?: string;
  story?: string;
  logo_url?: string;
  primary_color?: string;
  secondary_color?: string;
}

// ãƒ–ãƒ©ãƒ³ãƒ‰æ›´æ–°ç”¨
export interface BrandUpdate {
  name?: string;
  tagline?: string | null;
  story?: string | null;
  logo_url?: string | null;
  primary_color?: string;
  secondary_color?: string;
}

// ãƒã‚¤ãƒ³ãƒˆæ›´æ–°ç”¨
export interface BrandPointUpdate {
  content: string;
}

// 10ãƒã‚¤ãƒ³ãƒˆã®è¡¨ç¤ºæƒ…å ±
export const BRAND_POINT_INFO: Record<BrandPointType, {
  label: string;
  labelEn: string;
  description: string;
  placeholder: string;
  icon: string;
  order: number;
}> = {
  mission: {
    label: 'ãƒŸãƒƒã‚·ãƒ§ãƒ³',
    labelEn: 'Mission',
    description: 'ãƒ–ãƒ©ãƒ³ãƒ‰ã®å­˜åœ¨æ„ç¾©ãƒ»ä½¿å‘½',
    placeholder: 'ç§ãŸã¡ã¯ã€‡ã€‡ã‚’é€šã˜ã¦ã€â–³â–³ã‚’å®Ÿç¾ã—ã¾ã™',
    icon: 'ğŸ¯',
    order: 1,
  },
  vision: {
    label: 'ãƒ“ã‚¸ãƒ§ãƒ³',
    labelEn: 'Vision',
    description: 'ç›®æŒ‡ã™æœªæ¥åƒ',
    placeholder: 'ã€‡ã€‡å¹´å¾Œã€ç§ãŸã¡ã¯â–³â–³ãªä¸–ç•Œã‚’å‰µã‚Šã¾ã™',
    icon: 'ğŸ”®',
    order: 2,
  },
  target_audience: {
    label: 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ',
    labelEn: 'Target Audience',
    description: 'èª°ã®ãŸã‚ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‹',
    placeholder: 'ã€‡ã€‡ã«æ‚©ã‚€â–³â–³ãªäººã€…',
    icon: 'ğŸ‘¥',
    order: 3,
  },
  unique_value: {
    label: 'ç‹¬è‡ªä¾¡å€¤',
    labelEn: 'Unique Value',
    description: 'æä¾›ã™ã‚‹ç‹¬è‡ªã®ä¾¡å€¤',
    placeholder: 'ç§ãŸã¡ã ã‘ãŒæä¾›ã§ãã‚‹ã€‡ã€‡',
    icon: 'ğŸ’',
    order: 4,
  },
  brand_personality: {
    label: 'ãƒ–ãƒ©ãƒ³ãƒ‰äººæ ¼',
    labelEn: 'Brand Personality',
    description: 'ãƒ–ãƒ©ãƒ³ãƒ‰ã®äººæ ¼ãƒ»æ€§æ ¼',
    placeholder: 'ä¿¡é ¼ã§ãã‚‹ã€é©æ–°çš„ã€è¦ªã—ã¿ã‚„ã™ã„...',
    icon: 'ğŸ­',
    order: 5,
  },
  tone_voice: {
    label: 'ãƒˆãƒ¼ãƒ³&ãƒœã‚¤ã‚¹',
    labelEn: 'Tone & Voice',
    description: 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª¿å­',
    placeholder: 'ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã ãŒå°‚é–€çš„ã€ç°¡æ½”ã§æ˜ç¢º...',
    icon: 'ğŸ—£ï¸',
    order: 6,
  },
  visual_identity: {
    label: 'ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«',
    labelEn: 'Visual Identity',
    description: 'è¦–è¦šçš„ãªè¡¨ç¾ãƒ«ãƒ¼ãƒ«',
    placeholder: 'ãƒŸãƒ‹ãƒãƒ«ã€ãƒ¢ãƒ€ãƒ³ã€æ¸©ã‹ã¿ã®ã‚ã‚‹é…è‰²...',
    icon: 'ğŸ¨',
    order: 7,
  },
  key_messages: {
    label: 'ã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
    labelEn: 'Key Messages',
    description: 'ä¼ãˆã‚‹ã¹ãæ ¸å¿ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
    placeholder: 'å¸¸ã«ä¼ãˆãŸã„3ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
    icon: 'ğŸ’¬',
    order: 8,
  },
  competitors: {
    label: 'ç«¶åˆåˆ†æ',
    labelEn: 'Competitors',
    description: 'ç«¶åˆã¨ã®ä½ç½®ã¥ã‘',
    placeholder: 'ä¸»è¦ç«¶åˆã¨ç§ãŸã¡ã®é•ã„',
    icon: 'âš”ï¸',
    order: 9,
  },
  differentiators: {
    label: 'å·®åˆ¥åŒ–',
    labelEn: 'Differentiators',
    description: 'æ˜ç¢ºãªå·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆ',
    placeholder: 'ç«¶åˆã«ã¯ãªã„ç§ãŸã¡ã ã‘ã®å¼·ã¿',
    icon: 'ğŸ†',
    order: 10,
  },
};

// ãƒã‚¤ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®é…åˆ—ï¼ˆè¡¨ç¤ºé †ï¼‰
export const BRAND_POINT_TYPES: BrandPointType[] = [
  'mission',
  'vision',
  'target_audience',
  'unique_value',
  'brand_personality',
  'tone_voice',
  'visual_identity',
  'key_messages',
  'competitors',
  'differentiators',
];
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] `lib/types/brand.ts` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] BrandPointType ã«10ç¨®é¡ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [ ] BRAND_POINT_INFO ã«å„ãƒã‚¤ãƒ³ãƒˆã®è¡¨ç¤ºæƒ…å ±ãŒã‚ã‚‹

---

## Step 3: API Routes ä½œæˆ

### 3.1 ãƒ–ãƒ©ãƒ³ãƒ‰ CRUD API

**ãƒ•ã‚¡ã‚¤ãƒ«:** `app/api/brands/route.ts`

```typescript
/**
 * app/api/brands/route.ts
 *
 * GET /api/brands - ãƒ–ãƒ©ãƒ³ãƒ‰ä¸€è¦§å–å¾—
 * POST /api/brands - ãƒ–ãƒ©ãƒ³ãƒ‰ä½œæˆ
 */

import { NextRequest, NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { z } from 'zod';

const createBrandSchema = z.object({
  name: z.string().min(1, 'ãƒ–ãƒ©ãƒ³ãƒ‰åã¯å¿…é ˆã§ã™'),
  tagline: z.string().optional(),
  story: z.string().optional(),
  logo_url: z.string().url().optional().or(z.literal('')),
  primary_color: z.string().optional(),
  secondary_color: z.string().optional(),
});

// GET: ãƒ–ãƒ©ãƒ³ãƒ‰ä¸€è¦§å–å¾—
export async function GET() {
  try {
    const supabase = await createClient();
    const { data: { user }, error: authError } = await supabase.auth.getUser();

    if (authError || !user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { data, error } = await supabase
      .from('brands')
      .select('*')
      .eq('user_id', user.id)
      .order('created_at', { ascending: false });

    if (error) {
      console.error('Brands fetch error:', error);
      return NextResponse.json({ error: 'Failed to fetch brands' }, { status: 500 });
    }

    return NextResponse.json(data);
  } catch (error) {
    console.error('Brands GET error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// POST: ãƒ–ãƒ©ãƒ³ãƒ‰ä½œæˆ
export async function POST(request: NextRequest) {
  try {
    const supabase = await createClient();
    const { data: { user }, error: authError } = await supabase.auth.getUser();

    if (authError || !user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const result = createBrandSchema.safeParse(body);

    if (!result.success) {
      return NextResponse.json(
        { error: 'Invalid input', issues: result.error.issues },
        { status: 400 }
      );
    }

    // ãƒ–ãƒ©ãƒ³ãƒ‰ä½œæˆ
    const { data: brand, error: createError } = await supabase
      .from('brands')
      .insert({
        ...result.data,
        user_id: user.id,
      })
      .select()
      .single();

    if (createError) {
      console.error('Brand create error:', createError);
      return NextResponse.json({ error: 'Failed to create brand' }, { status: 500 });
    }

    // 10ãƒã‚¤ãƒ³ãƒˆã®åˆæœŸãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
    const pointTypes = [
      'mission', 'vision', 'target_audience', 'unique_value',
      'brand_personality', 'tone_voice', 'visual_identity',
      'key_messages', 'competitors', 'differentiators'
    ];

    const pointInserts = pointTypes.map(point_type => ({
      brand_id: brand.id,
      point_type,
      content: '',
    }));

    await supabase.from('brand_points').insert(pointInserts);

    return NextResponse.json(brand, { status: 201 });
  } catch (error) {
    console.error('Brands POST error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}
```

### 3.2 å€‹åˆ¥ãƒ–ãƒ©ãƒ³ãƒ‰ API

**ãƒ•ã‚¡ã‚¤ãƒ«:** `app/api/brands/[brandId]/route.ts`

```typescript
/**
 * app/api/brands/[brandId]/route.ts
 *
 * GET /api/brands/:brandId - ãƒ–ãƒ©ãƒ³ãƒ‰è©³ç´°å–å¾—
 * PATCH /api/brands/:brandId - ãƒ–ãƒ©ãƒ³ãƒ‰æ›´æ–°
 * DELETE /api/brands/:brandId - ãƒ–ãƒ©ãƒ³ãƒ‰å‰Šé™¤
 */

import { NextRequest, NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { z } from 'zod';

const updateBrandSchema = z.object({
  name: z.string().min(1).optional(),
  tagline: z.string().nullable().optional(),
  story: z.string().nullable().optional(),
  logo_url: z.string().url().optional().or(z.literal('')).nullable(),
  primary_color: z.string().optional(),
  secondary_color: z.string().optional(),
});

// GET: ãƒ–ãƒ©ãƒ³ãƒ‰è©³ç´°å–å¾—ï¼ˆãƒã‚¤ãƒ³ãƒˆå«ã‚€ï¼‰
export async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ brandId: string }> }
) {
  try {
    const { brandId } = await params;
    const supabase = await createClient();
    const { data: { user }, error: authError } = await supabase.auth.getUser();

    if (authError || !user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // ãƒ–ãƒ©ãƒ³ãƒ‰å–å¾—
    const { data: brand, error: brandError } = await supabase
      .from('brands')
      .select('*')
      .eq('id', brandId)
      .eq('user_id', user.id)
      .single();

    if (brandError || !brand) {
      return NextResponse.json({ error: 'Brand not found' }, { status: 404 });
    }

    // ãƒã‚¤ãƒ³ãƒˆå–å¾—
    const { data: points, error: pointsError } = await supabase
      .from('brand_points')
      .select('*')
      .eq('brand_id', brandId)
      .order('point_type');

    if (pointsError) {
      console.error('Brand points fetch error:', pointsError);
    }

    return NextResponse.json({
      ...brand,
      points: points || [],
    });
  } catch (error) {
    console.error('Brand GET error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// PATCH: ãƒ–ãƒ©ãƒ³ãƒ‰æ›´æ–°
export async function PATCH(
  request: NextRequest,
  { params }: { params: Promise<{ brandId: string }> }
) {
  try {
    const { brandId } = await params;
    const supabase = await createClient();
    const { data: { user }, error: authError } = await supabase.auth.getUser();

    if (authError || !user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const result = updateBrandSchema.safeParse(body);

    if (!result.success) {
      return NextResponse.json(
        { error: 'Invalid input', issues: result.error.issues },
        { status: 400 }
      );
    }

    const { data: brand, error: updateError } = await supabase
      .from('brands')
      .update({
        ...result.data,
        updated_at: new Date().toISOString(),
      })
      .eq('id', brandId)
      .eq('user_id', user.id)
      .select()
      .single();

    if (updateError) {
      console.error('Brand update error:', updateError);
      return NextResponse.json({ error: 'Failed to update brand' }, { status: 500 });
    }

    return NextResponse.json(brand);
  } catch (error) {
    console.error('Brand PATCH error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// DELETE: ãƒ–ãƒ©ãƒ³ãƒ‰å‰Šé™¤
export async function DELETE(
  request: NextRequest,
  { params }: { params: Promise<{ brandId: string }> }
) {
  try {
    const { brandId } = await params;
    const supabase = await createClient();
    const { data: { user }, error: authError } = await supabase.auth.getUser();

    if (authError || !user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { error: deleteError } = await supabase
      .from('brands')
      .delete()
      .eq('id', brandId)
      .eq('user_id', user.id);

    if (deleteError) {
      console.error('Brand delete error:', deleteError);
      return NextResponse.json({ error: 'Failed to delete brand' }, { status: 500 });
    }

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('Brand DELETE error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}
```

### 3.3 ãƒ–ãƒ©ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ›´æ–° API

**ãƒ•ã‚¡ã‚¤ãƒ«:** `app/api/brands/[brandId]/points/[pointType]/route.ts`

```typescript
/**
 * app/api/brands/[brandId]/points/[pointType]/route.ts
 *
 * PATCH /api/brands/:brandId/points/:pointType - ãƒã‚¤ãƒ³ãƒˆæ›´æ–°
 */

import { NextRequest, NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { z } from 'zod';

const updatePointSchema = z.object({
  content: z.string(),
});

const validPointTypes = [
  'mission', 'vision', 'target_audience', 'unique_value',
  'brand_personality', 'tone_voice', 'visual_identity',
  'key_messages', 'competitors', 'differentiators'
];

export async function PATCH(
  request: NextRequest,
  { params }: { params: Promise<{ brandId: string; pointType: string }> }
) {
  try {
    const { brandId, pointType } = await params;
    const supabase = await createClient();
    const { data: { user }, error: authError } = await supabase.auth.getUser();

    if (authError || !user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    if (!validPointTypes.includes(pointType)) {
      return NextResponse.json({ error: 'Invalid point type' }, { status: 400 });
    }

    // ãƒ–ãƒ©ãƒ³ãƒ‰æ‰€æœ‰è€…ç¢ºèª
    const { data: brand } = await supabase
      .from('brands')
      .select('id')
      .eq('id', brandId)
      .eq('user_id', user.id)
      .single();

    if (!brand) {
      return NextResponse.json({ error: 'Brand not found' }, { status: 404 });
    }

    const body = await request.json();
    const result = updatePointSchema.safeParse(body);

    if (!result.success) {
      return NextResponse.json(
        { error: 'Invalid input', issues: result.error.issues },
        { status: 400 }
      );
    }

    // upsertï¼ˆå­˜åœ¨ã—ãªã‘ã‚Œã°ä½œæˆã€ã‚ã‚Œã°æ›´æ–°ï¼‰
    const { data: point, error: upsertError } = await supabase
      .from('brand_points')
      .upsert({
        brand_id: brandId,
        point_type: pointType,
        content: result.data.content,
        updated_at: new Date().toISOString(),
      }, {
        onConflict: 'brand_id,point_type',
      })
      .select()
      .single();

    if (upsertError) {
      console.error('Point upsert error:', upsertError);
      return NextResponse.json({ error: 'Failed to update point' }, { status: 500 });
    }

    return NextResponse.json(point);
  } catch (error) {
    console.error('Point PATCH error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] `app/api/brands/route.ts` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] `app/api/brands/[brandId]/route.ts` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] `app/api/brands/[brandId]/points/[pointType]/route.ts` ãŒä½œæˆã•ã‚ŒãŸ

---

## Step 4: React Hooks ä½œæˆ

### 4.1 ãƒ–ãƒ©ãƒ³ãƒ‰ç®¡ç† Hook

**ãƒ•ã‚¡ã‚¤ãƒ«:** `lib/hooks/useBrand.ts`

```typescript
'use client';

/**
 * lib/hooks/useBrand.ts
 *
 * ãƒ–ãƒ©ãƒ³ãƒ‰ç®¡ç† Hook
 */

import { useState, useEffect, useCallback } from 'react';
import type { Brand, BrandPoint, BrandCreate, BrandUpdate, BrandPointType } from '@/lib/types/brand';

interface BrandWithPoints extends Brand {
  points: BrandPoint[];
}

export function useBrands() {
  const [brands, setBrands] = useState<Brand[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchBrands = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const response = await fetch('/api/brands', {
        credentials: 'include',
      });

      if (!response.ok) {
        throw new Error('Failed to fetch brands');
      }

      const data = await response.json();
      setBrands(data);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
    } finally {
      setIsLoading(false);
    }
  }, []);

  useEffect(() => {
    fetchBrands();
  }, [fetchBrands]);

  const createBrand = useCallback(async (input: BrandCreate) => {
    const response = await fetch('/api/brands', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify(input),
    });

    if (!response.ok) {
      const data = await response.json();
      throw new Error(data.error || 'Failed to create brand');
    }

    const newBrand = await response.json();
    setBrands(prev => [newBrand, ...prev]);
    return newBrand;
  }, []);

  const deleteBrand = useCallback(async (brandId: string) => {
    const response = await fetch(`/api/brands/${brandId}`, {
      method: 'DELETE',
      credentials: 'include',
    });

    if (!response.ok) {
      throw new Error('Failed to delete brand');
    }

    setBrands(prev => prev.filter(b => b.id !== brandId));
  }, []);

  return {
    brands,
    isLoading,
    error,
    refetch: fetchBrands,
    createBrand,
    deleteBrand,
  };
}

export function useBrand(brandId: string | null) {
  const [brand, setBrand] = useState<BrandWithPoints | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchBrand = useCallback(async () => {
    if (!brandId) {
      setBrand(null);
      setIsLoading(false);
      return;
    }

    setIsLoading(true);
    setError(null);

    try {
      const response = await fetch(`/api/brands/${brandId}`, {
        credentials: 'include',
      });

      if (!response.ok) {
        throw new Error('Failed to fetch brand');
      }

      const data = await response.json();
      setBrand(data);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
    } finally {
      setIsLoading(false);
    }
  }, [brandId]);

  useEffect(() => {
    fetchBrand();
  }, [fetchBrand]);

  const updateBrand = useCallback(async (updates: BrandUpdate) => {
    if (!brandId) return;

    const response = await fetch(`/api/brands/${brandId}`, {
      method: 'PATCH',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify(updates),
    });

    if (!response.ok) {
      throw new Error('Failed to update brand');
    }

    const updated = await response.json();
    setBrand(prev => prev ? { ...prev, ...updated } : null);
    return updated;
  }, [brandId]);

  const updatePoint = useCallback(async (pointType: BrandPointType, content: string) => {
    if (!brandId) return;

    const response = await fetch(`/api/brands/${brandId}/points/${pointType}`, {
      method: 'PATCH',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify({ content }),
    });

    if (!response.ok) {
      throw new Error('Failed to update point');
    }

    const updatedPoint = await response.json();

    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆæ›´æ–°
    setBrand(prev => {
      if (!prev) return null;
      const points = prev.points.map(p =>
        p.point_type === pointType ? updatedPoint : p
      );
      // ã‚‚ã—å­˜åœ¨ã—ãªã‘ã‚Œã°è¿½åŠ 
      if (!points.find(p => p.point_type === pointType)) {
        points.push(updatedPoint);
      }
      return { ...prev, points };
    });

    return updatedPoint;
  }, [brandId]);

  // ãƒã‚¤ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼
  const getPoint = useCallback((pointType: BrandPointType): string => {
    if (!brand) return '';
    const point = brand.points.find(p => p.point_type === pointType);
    return point?.content || '';
  }, [brand]);

  // å…¥åŠ›æ¸ˆã¿ãƒã‚¤ãƒ³ãƒˆæ•°
  const filledPointsCount = brand?.points.filter(p => p.content.trim() !== '').length || 0;

  return {
    brand,
    isLoading,
    error,
    refetch: fetchBrand,
    updateBrand,
    updatePoint,
    getPoint,
    filledPointsCount,
  };
}
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] `lib/hooks/useBrand.ts` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] `useBrands` ã§ãƒ–ãƒ©ãƒ³ãƒ‰ä¸€è¦§ç®¡ç†ãŒã§ãã‚‹
- [ ] `useBrand` ã§å€‹åˆ¥ãƒ–ãƒ©ãƒ³ãƒ‰ + ãƒã‚¤ãƒ³ãƒˆç®¡ç†ãŒã§ãã‚‹

---

## Step 5: UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

### 5.1 Glass morphism ã‚¹ã‚¿ã‚¤ãƒ«

**ãƒ•ã‚¡ã‚¤ãƒ«:** `app/globals.css` ã«è¿½åŠ 

```css
/* Glass morphism */
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 16px;
}

.glass-card-light {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 16px;
}

.glass-input {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  transition: all 0.2s;
}

.glass-input:focus {
  background: rgba(255, 255, 255, 0.95);
  border-color: var(--primary);
  outline: none;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}
```

### 5.2 ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `components/brand/BrandProfile.tsx`

```typescript
'use client';

/**
 * components/brand/BrandProfile.tsx
 *
 * ãƒ–ãƒ©ãƒ³ãƒ‰åŸºæœ¬æƒ…å ±è¡¨ç¤ºãƒ»ç·¨é›†
 */

import { useState } from 'react';
import { Edit2, Save, X } from 'lucide-react';
import type { Brand, BrandUpdate } from '@/lib/types/brand';

interface BrandProfileProps {
  brand: Brand;
  onUpdate: (updates: BrandUpdate) => Promise<void>;
}

export function BrandProfile({ brand, onUpdate }: BrandProfileProps) {
  const [isEditing, setIsEditing] = useState(false);
  const [name, setName] = useState(brand.name);
  const [tagline, setTagline] = useState(brand.tagline || '');
  const [story, setStory] = useState(brand.story || '');
  const [isSaving, setIsSaving] = useState(false);

  const handleSave = async () => {
    setIsSaving(true);
    try {
      await onUpdate({ name, tagline, story });
      setIsEditing(false);
    } catch (err) {
      console.error('Failed to save:', err);
    } finally {
      setIsSaving(false);
    }
  };

  const handleCancel = () => {
    setName(brand.name);
    setTagline(brand.tagline || '');
    setStory(brand.story || '');
    setIsEditing(false);
  };

  return (
    <div className="glass-card-light" style={{ padding: '24px' }}>
      <div style={{
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'flex-start',
        marginBottom: '20px',
      }}>
        <h2 style={{
          fontSize: '20px',
          fontWeight: 700,
          color: 'var(--text-dark)',
          margin: 0,
        }}>
          ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
        </h2>
        {!isEditing ? (
          <button
            onClick={() => setIsEditing(true)}
            style={{
              display: 'flex',
              alignItems: 'center',
              gap: '6px',
              padding: '8px 12px',
              fontSize: '13px',
              background: 'var(--primary)',
              color: 'white',
              border: 'none',
              borderRadius: '8px',
              cursor: 'pointer',
            }}
          >
            <Edit2 size={14} />
            ç·¨é›†
          </button>
        ) : (
          <div style={{ display: 'flex', gap: '8px' }}>
            <button
              onClick={handleCancel}
              style={{
                display: 'flex',
                alignItems: 'center',
                gap: '6px',
                padding: '8px 12px',
                fontSize: '13px',
                background: 'var(--bg-gray)',
                color: 'var(--text-dark)',
                border: 'none',
                borderRadius: '8px',
                cursor: 'pointer',
              }}
            >
              <X size={14} />
              ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </button>
            <button
              onClick={handleSave}
              disabled={isSaving}
              style={{
                display: 'flex',
                alignItems: 'center',
                gap: '6px',
                padding: '8px 12px',
                fontSize: '13px',
                background: 'var(--success)',
                color: 'white',
                border: 'none',
                borderRadius: '8px',
                cursor: isSaving ? 'not-allowed' : 'pointer',
                opacity: isSaving ? 0.7 : 1,
              }}
            >
              <Save size={14} />
              {isSaving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}
            </button>
          </div>
        )}
      </div>

      <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
        {/* ãƒ–ãƒ©ãƒ³ãƒ‰å */}
        <div>
          <label style={{
            display: 'block',
            fontSize: '13px',
            fontWeight: 600,
            color: 'var(--text-muted)',
            marginBottom: '6px',
          }}>
            ãƒ–ãƒ©ãƒ³ãƒ‰å
          </label>
          {isEditing ? (
            <input
              type="text"
              value={name}
              onChange={(e) => setName(e.target.value)}
              className="glass-input"
              style={{
                width: '100%',
                padding: '12px',
                fontSize: '16px',
                fontWeight: 600,
              }}
            />
          ) : (
            <p style={{
              fontSize: '24px',
              fontWeight: 700,
              color: 'var(--text-dark)',
              margin: 0,
            }}>
              {brand.name}
            </p>
          )}
        </div>

        {/* ã‚¿ã‚°ãƒ©ã‚¤ãƒ³ */}
        <div>
          <label style={{
            display: 'block',
            fontSize: '13px',
            fontWeight: 600,
            color: 'var(--text-muted)',
            marginBottom: '6px',
          }}>
            ã‚¿ã‚°ãƒ©ã‚¤ãƒ³
          </label>
          {isEditing ? (
            <input
              type="text"
              value={tagline}
              onChange={(e) => setTagline(e.target.value)}
              placeholder="ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ä¸€è¨€ã§è¡¨ã™ãƒ•ãƒ¬ãƒ¼ã‚º"
              className="glass-input"
              style={{
                width: '100%',
                padding: '12px',
                fontSize: '14px',
              }}
            />
          ) : (
            <p style={{
              fontSize: '16px',
              color: brand.tagline ? 'var(--text-dark)' : 'var(--text-muted)',
              margin: 0,
              fontStyle: brand.tagline ? 'normal' : 'italic',
            }}>
              {brand.tagline || 'æœªè¨­å®š'}
            </p>
          )}
        </div>

        {/* ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ */}
        <div>
          <label style={{
            display: 'block',
            fontSize: '13px',
            fontWeight: 600,
            color: 'var(--text-muted)',
            marginBottom: '6px',
          }}>
            ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¹ãƒˆãƒ¼ãƒªãƒ¼
          </label>
          {isEditing ? (
            <textarea
              value={story}
              onChange={(e) => setStory(e.target.value)}
              placeholder="ãƒ–ãƒ©ãƒ³ãƒ‰ã®èƒŒæ™¯ã‚„æƒ³ã„ã‚’è¨˜è¿°"
              className="glass-input"
              rows={4}
              style={{
                width: '100%',
                padding: '12px',
                fontSize: '14px',
                resize: 'vertical',
              }}
            />
          ) : (
            <p style={{
              fontSize: '14px',
              color: brand.story ? 'var(--text-dark)' : 'var(--text-muted)',
              margin: 0,
              lineHeight: 1.6,
              fontStyle: brand.story ? 'normal' : 'italic',
              whiteSpace: 'pre-wrap',
            }}>
              {brand.story || 'æœªè¨­å®š'}
            </p>
          )}
        </div>
      </div>
    </div>
  );
}
```

### 5.3 10ãƒã‚¤ãƒ³ãƒˆç·¨é›†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `components/brand/BrandPoints.tsx`

```typescript
'use client';

/**
 * components/brand/BrandPoints.tsx
 *
 * 10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ç·¨é›†
 */

import { useState } from 'react';
import { ChevronDown, ChevronUp, Check, Circle } from 'lucide-react';
import {
  BRAND_POINT_INFO,
  BRAND_POINT_TYPES,
  type BrandPoint,
  type BrandPointType,
} from '@/lib/types/brand';

interface BrandPointsProps {
  points: BrandPoint[];
  onUpdatePoint: (pointType: BrandPointType, content: string) => Promise<void>;
}

interface PointCardProps {
  pointType: BrandPointType;
  content: string;
  onSave: (content: string) => Promise<void>;
}

function PointCard({ pointType, content, onSave }: PointCardProps) {
  const info = BRAND_POINT_INFO[pointType];
  const [isExpanded, setIsExpanded] = useState(false);
  const [editContent, setEditContent] = useState(content);
  const [isSaving, setIsSaving] = useState(false);
  const hasContent = content.trim() !== '';

  const handleSave = async () => {
    if (editContent === content) return;
    setIsSaving(true);
    try {
      await onSave(editContent);
    } catch (err) {
      console.error('Failed to save point:', err);
    } finally {
      setIsSaving(false);
    }
  };

  return (
    <div
      className="glass-card-light"
      style={{
        overflow: 'hidden',
        transition: 'all 0.2s',
      }}
    >
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <button
        onClick={() => setIsExpanded(!isExpanded)}
        style={{
          width: '100%',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'space-between',
          padding: '16px 20px',
          background: 'transparent',
          border: 'none',
          cursor: 'pointer',
          textAlign: 'left',
        }}
      >
        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
          <span style={{ fontSize: '20px' }}>{info.icon}</span>
          <div>
            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
              <h3 style={{
                fontSize: '15px',
                fontWeight: 600,
                color: 'var(--text-dark)',
                margin: 0,
              }}>
                {info.label}
              </h3>
              <span style={{
                fontSize: '12px',
                color: 'var(--text-muted)',
              }}>
                {info.labelEn}
              </span>
            </div>
            <p style={{
              fontSize: '12px',
              color: 'var(--text-muted)',
              margin: '2px 0 0 0',
            }}>
              {info.description}
            </p>
          </div>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
          {hasContent ? (
            <Check size={16} color="var(--success)" />
          ) : (
            <Circle size={16} color="var(--text-muted)" />
          )}
          {isExpanded ? (
            <ChevronUp size={20} color="var(--text-muted)" />
          ) : (
            <ChevronDown size={20} color="var(--text-muted)" />
          )}
        </div>
      </button>

      {/* å±•é–‹ã‚¨ãƒªã‚¢ */}
      {isExpanded && (
        <div style={{
          padding: '0 20px 20px 20px',
          borderTop: '1px solid var(--border-light)',
        }}>
          <textarea
            value={editContent}
            onChange={(e) => setEditContent(e.target.value)}
            onBlur={handleSave}
            placeholder={info.placeholder}
            className="glass-input"
            rows={4}
            style={{
              width: '100%',
              padding: '12px',
              fontSize: '14px',
              marginTop: '16px',
              resize: 'vertical',
            }}
          />
          {isSaving && (
            <p style={{
              fontSize: '12px',
              color: 'var(--text-muted)',
              marginTop: '8px',
            }}>
              ä¿å­˜ä¸­...
            </p>
          )}
        </div>
      )}
    </div>
  );
}

export function BrandPoints({ points, onUpdatePoint }: BrandPointsProps) {
  const filledCount = points.filter(p => p.content.trim() !== '').length;

  const getPointContent = (pointType: BrandPointType): string => {
    const point = points.find(p => p.point_type === pointType);
    return point?.content || '';
  };

  return (
    <div>
      {/* é€²æ— */}
      <div style={{
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
        marginBottom: '20px',
      }}>
        <h2 style={{
          fontSize: '20px',
          fontWeight: 700,
          color: 'var(--text-dark)',
          margin: 0,
        }}>
          10ãƒã‚¤ãƒ³ãƒˆæˆ¦ç•¥
        </h2>
        <div style={{
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
        }}>
          <div style={{
            width: '120px',
            height: '8px',
            background: 'var(--bg-gray)',
            borderRadius: '4px',
            overflow: 'hidden',
          }}>
            <div
              style={{
                width: `${(filledCount / 10) * 100}%`,
                height: '100%',
                background: filledCount === 10 ? 'var(--success)' : 'var(--primary)',
                transition: 'width 0.3s',
              }}
            />
          </div>
          <span style={{
            fontSize: '13px',
            fontWeight: 600,
            color: filledCount === 10 ? 'var(--success)' : 'var(--text-muted)',
          }}>
            {filledCount}/10
          </span>
        </div>
      </div>

      {/* ãƒã‚¤ãƒ³ãƒˆä¸€è¦§ */}
      <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
        {BRAND_POINT_TYPES.map(pointType => (
          <PointCard
            key={pointType}
            pointType={pointType}
            content={getPointContent(pointType)}
            onSave={(content) => onUpdatePoint(pointType, content)}
          />
        ))}
      </div>
    </div>
  );
}
```

### 5.4 ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ãƒã‚§ãƒƒã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `components/brand/TonmanaCheck.tsx`

```typescript
'use client';

/**
 * components/brand/TonmanaCheck.tsx
 *
 * ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
 */

import { useState } from 'react';
import { MessageSquare, CheckCircle2, AlertTriangle, Sparkles } from 'lucide-react';
import type { BrandPoint, BrandPointType } from '@/lib/types/brand';

interface TonmanaCheckProps {
  brandName: string;
  points: BrandPoint[];
}

interface CheckResult {
  score: number;
  feedback: string[];
  suggestions: string[];
}

export function TonmanaCheck({ brandName, points }: TonmanaCheckProps) {
  const [inputText, setInputText] = useState('');
  const [isChecking, setIsChecking] = useState(false);
  const [result, setResult] = useState<CheckResult | null>(null);

  const getPointContent = (type: BrandPointType): string => {
    return points.find(p => p.point_type === type)?.content || '';
  };

  const toneVoice = getPointContent('tone_voice');
  const brandPersonality = getPointContent('brand_personality');
  const keyMessages = getPointContent('key_messages');

  const handleCheck = () => {
    if (!inputText.trim()) return;

    setIsChecking(true);

    // ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯
    setTimeout(() => {
      const feedback: string[] = [];
      const suggestions: string[] = [];
      let score = 70; // ãƒ™ãƒ¼ã‚¹ã‚¹ã‚³ã‚¢

      // é•·ã•ãƒã‚§ãƒƒã‚¯
      if (inputText.length < 20) {
        feedback.push('ãƒ†ã‚­ã‚¹ãƒˆãŒçŸ­ã™ãã¾ã™');
        score -= 10;
      }

      // ãƒ–ãƒ©ãƒ³ãƒ‰åå«æœ‰ãƒã‚§ãƒƒã‚¯
      if (inputText.includes(brandName)) {
        feedback.push('ãƒ–ãƒ©ãƒ³ãƒ‰åãŒå«ã¾ã‚Œã¦ã„ã¾ã™');
        score += 5;
      }

      // ãƒˆãƒ¼ãƒ³&ãƒœã‚¤ã‚¹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
      if (toneVoice) {
        const toneKeywords = toneVoice.split(/[ã€,ï¼Œ\s]+/).filter(k => k.length > 1);
        const matchedTone = toneKeywords.filter(k => inputText.includes(k));
        if (matchedTone.length > 0) {
          feedback.push(`ãƒˆãƒ¼ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€Œ${matchedTone.join('ã€ã€Œ')}ã€ãŒåæ˜ ã•ã‚Œã¦ã„ã¾ã™`);
          score += matchedTone.length * 3;
        } else {
          suggestions.push(`ãƒˆãƒ¼ãƒ³ã€Œ${toneVoice}ã€ã‚’æ„è­˜ã—ãŸè¡¨ç¾ã‚’æ¤œè¨ã—ã¦ãã ã•ã„`);
        }
      }

      // ãƒ–ãƒ©ãƒ³ãƒ‰äººæ ¼ãƒã‚§ãƒƒã‚¯
      if (brandPersonality) {
        const personalityKeywords = brandPersonality.split(/[ã€,ï¼Œ\s]+/).filter(k => k.length > 1);
        const matchedPersonality = personalityKeywords.filter(k => inputText.includes(k));
        if (matchedPersonality.length > 0) {
          feedback.push(`ãƒ–ãƒ©ãƒ³ãƒ‰äººæ ¼ã€Œ${matchedPersonality.join('ã€ã€Œ')}ã€ãŒè¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™`);
          score += matchedPersonality.length * 3;
        }
      }

      // ã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒã‚§ãƒƒã‚¯
      if (keyMessages) {
        const messageKeywords = keyMessages.split(/[ã€,ï¼Œ\n]+/).filter(k => k.length > 2);
        const matchedMessages = messageKeywords.filter(k => inputText.includes(k));
        if (matchedMessages.length > 0) {
          feedback.push(`ã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã¦ã„ã¾ã™`);
          score += 10;
        } else {
          suggestions.push('ã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¦ç´ ã‚’å«ã‚ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„');
        }
      }

      // ã‚¹ã‚³ã‚¢èª¿æ•´
      score = Math.min(100, Math.max(0, score));

      if (feedback.length === 0) {
        feedback.push('åŸºæœ¬çš„ãªãƒã‚§ãƒƒã‚¯ã‚’é€šéã—ã¾ã—ãŸ');
      }

      setResult({ score, feedback, suggestions });
      setIsChecking(false);
    }, 500);
  };

  const getScoreColor = (score: number): string => {
    if (score >= 80) return 'var(--success)';
    if (score >= 60) return 'var(--warning, #f59e0b)';
    return 'var(--error)';
  };

  return (
    <div className="glass-card-light" style={{ padding: '24px' }}>
      <div style={{
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        marginBottom: '20px',
      }}>
        <MessageSquare size={24} color="var(--primary)" />
        <div>
          <h2 style={{
            fontSize: '20px',
            fontWeight: 700,
            color: 'var(--text-dark)',
            margin: 0,
          }}>
            ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ãƒã‚§ãƒƒã‚¯
          </h2>
          <p style={{
            fontSize: '13px',
            color: 'var(--text-muted)',
            margin: '4px 0 0 0',
          }}>
            ãƒ†ã‚­ã‚¹ãƒˆãŒãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«æ²¿ã£ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
          </p>
        </div>
      </div>

      {/* å¿…è¦ãªãƒã‚¤ãƒ³ãƒˆã®ç¢ºèª */}
      {(!toneVoice && !brandPersonality) && (
        <div style={{
          padding: '12px 16px',
          background: 'var(--warning, #fef3c7)',
          borderRadius: '8px',
          marginBottom: '16px',
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
        }}>
          <AlertTriangle size={16} color="var(--warning, #f59e0b)" />
          <p style={{ fontSize: '13px', color: 'var(--text-dark)', margin: 0 }}>
            ã€Œãƒˆãƒ¼ãƒ³&ãƒœã‚¤ã‚¹ã€ã¨ã€Œãƒ–ãƒ©ãƒ³ãƒ‰äººæ ¼ã€ã‚’è¨­å®šã™ã‚‹ã¨ã€ã‚ˆã‚Šæ­£ç¢ºãªãƒã‚§ãƒƒã‚¯ãŒã§ãã¾ã™
          </p>
        </div>
      )}

      {/* å…¥åŠ›ã‚¨ãƒªã‚¢ */}
      <div style={{ marginBottom: '16px' }}>
        <textarea
          value={inputText}
          onChange={(e) => setInputText(e.target.value)}
          placeholder="ãƒã‚§ãƒƒã‚¯ã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šSNSæŠ•ç¨¿ã€ãƒ¡ãƒ¼ãƒ«æ–‡é¢ã€åºƒå‘Šã‚³ãƒ”ãƒ¼ãªã©ï¼‰"
          className="glass-input"
          rows={5}
          style={{
            width: '100%',
            padding: '12px',
            fontSize: '14px',
            resize: 'vertical',
          }}
        />
      </div>

      {/* ãƒã‚§ãƒƒã‚¯ãƒœã‚¿ãƒ³ */}
      <button
        onClick={handleCheck}
        disabled={!inputText.trim() || isChecking}
        style={{
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          gap: '8px',
          width: '100%',
          padding: '12px',
          fontSize: '14px',
          fontWeight: 600,
          background: inputText.trim() ? 'var(--primary)' : 'var(--bg-gray)',
          color: inputText.trim() ? 'white' : 'var(--text-muted)',
          border: 'none',
          borderRadius: '8px',
          cursor: inputText.trim() ? 'pointer' : 'not-allowed',
        }}
      >
        <Sparkles size={16} />
        {isChecking ? 'ãƒã‚§ãƒƒã‚¯ä¸­...' : 'ãƒã‚§ãƒƒã‚¯ã™ã‚‹'}
      </button>

      {/* çµæœè¡¨ç¤º */}
      {result && (
        <div style={{
          marginTop: '20px',
          padding: '16px',
          background: 'var(--bg-gray)',
          borderRadius: '12px',
        }}>
          {/* ã‚¹ã‚³ã‚¢ */}
          <div style={{
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            marginBottom: '16px',
          }}>
            <div style={{
              width: '80px',
              height: '80px',
              borderRadius: '50%',
              border: `4px solid ${getScoreColor(result.score)}`,
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              flexDirection: 'column',
            }}>
              <span style={{
                fontSize: '24px',
                fontWeight: 700,
                color: getScoreColor(result.score),
              }}>
                {result.score}
              </span>
              <span style={{
                fontSize: '10px',
                color: 'var(--text-muted)',
              }}>
                / 100
              </span>
            </div>
          </div>

          {/* ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */}
          {result.feedback.length > 0 && (
            <div style={{ marginBottom: '12px' }}>
              <h4 style={{
                fontSize: '13px',
                fontWeight: 600,
                color: 'var(--text-dark)',
                marginBottom: '8px',
              }}>
                <CheckCircle2 size={14} style={{ marginRight: '6px', color: 'var(--success)' }} />
                è‰¯ã„ç‚¹
              </h4>
              <ul style={{
                margin: 0,
                paddingLeft: '20px',
                fontSize: '13px',
                color: 'var(--text-muted)',
              }}>
                {result.feedback.map((f, i) => (
                  <li key={i} style={{ marginBottom: '4px' }}>{f}</li>
                ))}
              </ul>
            </div>
          )}

          {/* æ”¹å–„ææ¡ˆ */}
          {result.suggestions.length > 0 && (
            <div>
              <h4 style={{
                fontSize: '13px',
                fontWeight: 600,
                color: 'var(--text-dark)',
                marginBottom: '8px',
              }}>
                <Sparkles size={14} style={{ marginRight: '6px', color: 'var(--primary)' }} />
                æ”¹å–„ææ¡ˆ
              </h4>
              <ul style={{
                margin: 0,
                paddingLeft: '20px',
                fontSize: '13px',
                color: 'var(--text-muted)',
              }}>
                {result.suggestions.map((s, i) => (
                  <li key={i} style={{ marginBottom: '4px' }}>{s}</li>
                ))}
              </ul>
            </div>
          )}
        </div>
      )}
    </div>
  );
}
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] `components/brand/BrandProfile.tsx` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] `components/brand/BrandPoints.tsx` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] `components/brand/TonmanaCheck.tsx` ãŒä½œæˆã•ã‚ŒãŸ

---

## Step 6: ãƒ–ãƒ©ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸ä½œæˆ

### 6.1 ãƒ–ãƒ©ãƒ³ãƒ‰ä¸€è¦§ãƒ»è©³ç´°ãƒšãƒ¼ã‚¸

**ãƒ•ã‚¡ã‚¤ãƒ«:** `app/(app)/brand/page.tsx`

```typescript
'use client';

/**
 * app/(app)/brand/page.tsx
 *
 * ãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥ãƒšãƒ¼ã‚¸
 */

import { useState } from 'react';
import { Palette, Plus, Trash2, ChevronRight } from 'lucide-react';
import { useBrands, useBrand } from '@/lib/hooks/useBrand';
import { BrandProfile } from '@/components/brand/BrandProfile';
import { BrandPoints } from '@/components/brand/BrandPoints';
import { TonmanaCheck } from '@/components/brand/TonmanaCheck';

export default function BrandPage() {
  const { brands, isLoading: brandsLoading, createBrand, deleteBrand } = useBrands();
  const [selectedBrandId, setSelectedBrandId] = useState<string | null>(null);
  const [isCreating, setIsCreating] = useState(false);
  const [newBrandName, setNewBrandName] = useState('');

  const { brand, isLoading: brandLoading, updateBrand, updatePoint } = useBrand(selectedBrandId);

  const handleCreateBrand = async () => {
    if (!newBrandName.trim()) return;
    setIsCreating(true);
    try {
      const newBrand = await createBrand({ name: newBrandName.trim() });
      setSelectedBrandId(newBrand.id);
      setNewBrandName('');
    } catch (err) {
      console.error('Failed to create brand:', err);
    } finally {
      setIsCreating(false);
    }
  };

  const handleDeleteBrand = async (brandId: string) => {
    if (!confirm('ã“ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
    try {
      await deleteBrand(brandId);
      if (selectedBrandId === brandId) {
        setSelectedBrandId(null);
      }
    } catch (err) {
      console.error('Failed to delete brand:', err);
    }
  };

  return (
    <div>
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <div style={{
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        marginBottom: '24px',
      }}>
        <Palette size={28} color="var(--primary)" />
        <div>
          <h2 style={{
            fontSize: '24px',
            fontWeight: 700,
            color: 'var(--text-dark)',
            margin: 0,
          }}>
            ãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥
          </h2>
          <p style={{
            fontSize: '14px',
            color: 'var(--text-muted)',
            margin: '4px 0 0 0',
          }}>
            10ãƒã‚¤ãƒ³ãƒˆã§ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’æ•´ç†
          </p>
        </div>
      </div>

      <div style={{
        display: 'grid',
        gridTemplateColumns: '280px 1fr',
        gap: '24px',
      }}>
        {/* ã‚µã‚¤ãƒ‰ãƒãƒ¼: ãƒ–ãƒ©ãƒ³ãƒ‰ä¸€è¦§ */}
        <div>
          {/* æ–°è¦ä½œæˆ */}
          <div style={{
            marginBottom: '16px',
            padding: '16px',
            background: 'var(--bg-gray)',
            borderRadius: '12px',
          }}>
            <input
              type="text"
              value={newBrandName}
              onChange={(e) => setNewBrandName(e.target.value)}
              placeholder="æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒ‰å"
              className="glass-input"
              style={{
                width: '100%',
                padding: '10px 12px',
                fontSize: '14px',
                marginBottom: '8px',
              }}
              onKeyDown={(e) => {
                if (e.key === 'Enter') handleCreateBrand();
              }}
            />
            <button
              onClick={handleCreateBrand}
              disabled={!newBrandName.trim() || isCreating}
              style={{
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '6px',
                width: '100%',
                padding: '10px',
                fontSize: '14px',
                fontWeight: 500,
                background: newBrandName.trim() ? 'var(--primary)' : 'var(--border-light)',
                color: newBrandName.trim() ? 'white' : 'var(--text-muted)',
                border: 'none',
                borderRadius: '8px',
                cursor: newBrandName.trim() ? 'pointer' : 'not-allowed',
              }}
            >
              <Plus size={16} />
              {isCreating ? 'ä½œæˆä¸­...' : 'ä½œæˆ'}
            </button>
          </div>

          {/* ãƒ–ãƒ©ãƒ³ãƒ‰ä¸€è¦§ */}
          <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
            {brandsLoading ? (
              <p style={{ fontSize: '14px', color: 'var(--text-muted)', padding: '16px' }}>
                èª­ã¿è¾¼ã¿ä¸­...
              </p>
            ) : brands.length === 0 ? (
              <p style={{
                fontSize: '14px',
                color: 'var(--text-muted)',
                padding: '16px',
                textAlign: 'center',
              }}>
                ãƒ–ãƒ©ãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“
              </p>
            ) : (
              brands.map(b => (
                <div
                  key={b.id}
                  style={{
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'space-between',
                    padding: '12px 16px',
                    background: selectedBrandId === b.id ? 'var(--primary-alpha-10)' : 'white',
                    border: selectedBrandId === b.id ? '1px solid var(--primary)' : '1px solid var(--border-light)',
                    borderRadius: '10px',
                    cursor: 'pointer',
                    transition: 'all 0.2s',
                  }}
                  onClick={() => setSelectedBrandId(b.id)}
                >
                  <div style={{ flex: 1, minWidth: 0 }}>
                    <p style={{
                      fontSize: '14px',
                      fontWeight: 600,
                      color: 'var(--text-dark)',
                      margin: 0,
                      overflow: 'hidden',
                      textOverflow: 'ellipsis',
                      whiteSpace: 'nowrap',
                    }}>
                      {b.name}
                    </p>
                    {b.tagline && (
                      <p style={{
                        fontSize: '12px',
                        color: 'var(--text-muted)',
                        margin: '2px 0 0 0',
                        overflow: 'hidden',
                        textOverflow: 'ellipsis',
                        whiteSpace: 'nowrap',
                      }}>
                        {b.tagline}
                      </p>
                    )}
                  </div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                    <button
                      onClick={(e) => {
                        e.stopPropagation();
                        handleDeleteBrand(b.id);
                      }}
                      style={{
                        padding: '6px',
                        background: 'transparent',
                        border: 'none',
                        borderRadius: '6px',
                        cursor: 'pointer',
                        color: 'var(--text-muted)',
                      }}
                    >
                      <Trash2 size={14} />
                    </button>
                    <ChevronRight size={16} color="var(--text-muted)" />
                  </div>
                </div>
              ))
            )}
          </div>
        </div>

        {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
        <div>
          {!selectedBrandId ? (
            <div style={{
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              justifyContent: 'center',
              padding: '60px',
              background: 'var(--bg-gray)',
              borderRadius: '16px',
              textAlign: 'center',
            }}>
              <Palette size={48} color="var(--text-muted)" style={{ opacity: 0.5, marginBottom: '16px' }} />
              <p style={{ fontSize: '16px', color: 'var(--text-muted)' }}>
                ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’é¸æŠã¾ãŸã¯ä½œæˆã—ã¦ãã ã•ã„
              </p>
            </div>
          ) : brandLoading ? (
            <div style={{ padding: '40px', textAlign: 'center', color: 'var(--text-muted)' }}>
              èª­ã¿è¾¼ã¿ä¸­...
            </div>
          ) : brand ? (
            <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>
              {/* ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« */}
              <BrandProfile brand={brand} onUpdate={updateBrand} />

              {/* 10ãƒã‚¤ãƒ³ãƒˆ */}
              <BrandPoints points={brand.points} onUpdatePoint={updatePoint} />

              {/* ãƒˆãƒ³ãƒãƒŠãƒã‚§ãƒƒã‚¯ */}
              <TonmanaCheck brandName={brand.name} points={brand.points} />
            </div>
          ) : null}
        </div>
      </div>
    </div>
  );
}
```

### 6.2 ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«:** `app/(app)/layout.tsx` ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ 

```typescript
// import ã«è¿½åŠ 
import { Palette } from 'lucide-react';

// NAV_ITEMS ã«è¿½åŠ 
{ href: '/brand', label: 'ãƒ–ãƒ©ãƒ³ãƒ‰', icon: Palette },
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] `app/(app)/brand/page.tsx` ãŒä½œæˆã•ã‚ŒãŸ
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ–ãƒ©ãƒ³ãƒ‰ãƒªãƒ³ã‚¯ãŒè¿½åŠ ã•ã‚ŒãŸ

---

## Step 7: å‹ãƒã‚§ãƒƒã‚¯ & ãƒ“ãƒ«ãƒ‰

```bash
npm run type-check
npm run build
```

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

- [ ] å‹ãƒã‚§ãƒƒã‚¯ãŒã‚¨ãƒ©ãƒ¼ãªãå®Œäº†
- [ ] ãƒ“ãƒ«ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ãªãå®Œäº†

---

## Step 8: å‹•ä½œç¢ºèª

### 8.1 é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
```

### 8.2 ç¢ºèªé …ç›®

1. http://localhost:3000/brand ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ä»¥ä¸‹ã‚’ç¢ºèª:
   - [ ] ãƒ–ãƒ©ãƒ³ãƒ‰ä½œæˆãŒã§ãã‚‹
   - [ ] 10ãƒã‚¤ãƒ³ãƒˆã®å±•é–‹ãƒ»ç·¨é›†ãŒã§ãã‚‹
   - [ ] ç·¨é›†å†…å®¹ãŒä¿å­˜ã•ã‚Œã‚‹
   - [ ] ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ãƒã‚§ãƒƒã‚¯ãŒå‹•ä½œã™ã‚‹
   - [ ] Glass morphism ã‚¹ã‚¿ã‚¤ãƒ«ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹

---

## Step 9: Git ãƒ—ãƒƒã‚·ãƒ¥

```bash
git add -A
git commit -m "Phase 15: 10ãƒã‚¤ãƒ³ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰æˆ¦ç•¥

- supabase/migrations: brands, brand_points ãƒ†ãƒ¼ãƒ–ãƒ« + RLS
- lib/types/brand.ts: BrandPointType(10ç¨®é¡) + BRAND_POINT_INFO
- app/api/brands: CRUD API Routes
- app/api/brands/[brandId]/points/[pointType]: ãƒã‚¤ãƒ³ãƒˆæ›´æ–° API
- lib/hooks/useBrand.ts: useBrands / useBrand Hooks
- components/brand/BrandProfile.tsx: åŸºæœ¬æƒ…å ±ç·¨é›†
- components/brand/BrandPoints.tsx: 10ãƒã‚¤ãƒ³ãƒˆç·¨é›†ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰
- components/brand/TonmanaCheck.tsx: ãƒˆãƒ¼ãƒ³&ãƒãƒŠãƒ¼ãƒã‚§ãƒƒã‚¯
- app/(app)/brand/page.tsx: ãƒ–ãƒ©ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸
- Glass morphism ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"

git push
```

---

## å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [ ] brands ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] brand_points ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] RLS ãƒãƒªã‚·ãƒ¼è¨­å®š
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆåŠŸ

### å‹å®šç¾©
- [ ] BrandPointTypeï¼ˆ10ç¨®é¡ï¼‰
- [ ] Brand / BrandPoint ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- [ ] BRAND_POINT_INFOï¼ˆè¡¨ç¤ºæƒ…å ±ï¼‰

### API Routes
- [ ] `GET/POST /api/brands` ä½œæˆ
- [ ] `GET/PATCH/DELETE /api/brands/:brandId` ä½œæˆ
- [ ] `PATCH /api/brands/:brandId/points/:pointType` ä½œæˆ

### React Hooks
- [ ] `useBrands` ä½œæˆ
- [ ] `useBrand` ä½œæˆ
- [ ] ãƒã‚¤ãƒ³ãƒˆå–å¾—ãƒ»æ›´æ–°æ©Ÿèƒ½

### UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] `BrandProfile` ä½œæˆ
- [ ] `BrandPoints`ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ä½œæˆ
- [ ] `TonmanaCheck` ä½œæˆ
- [ ] Glass morphism ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨

### çµ±åˆ
- [ ] `/brand` ãƒšãƒ¼ã‚¸ä½œæˆ
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
- [ ] å‹ãƒã‚§ãƒƒã‚¯æˆåŠŸ
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] Git ãƒ—ãƒƒã‚·ãƒ¥å®Œäº†

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆPhase 16 ä»¥é™ï¼‰

1. **AI é€£æº**
   - Claude API ã§ãƒˆãƒ³ãƒãƒŠãƒã‚§ãƒƒã‚¯å¼·åŒ–
   - ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆæ”¯æ´

2. **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£**
   - ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆè¨­å®š
   - ãƒ­ã‚´ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

3. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½**
   - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³PDFç”Ÿæˆ
   - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¢ã‚»ãƒƒãƒˆä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
